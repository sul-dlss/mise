<p id="notice"><%= notice %></p>

<% if can? :edit, @workspace %>
  <%= react_component("EditInPlace", { field: 'title', value: @workspace.title, csrfToken: form_authenticity_token }, tag: 'h1') %>

  <span class="fst-italic">Last updated <%= time_ago_in_words(@workspace.updated_at) %> ago <%= "by #{User.find(@workspace.paper_trail.originator)&.uid}" if @workspace.paper_trail.originator.present? %></span>
  <div>
    <%= react_component("EditInPlace", { field: 'description', placeholder: 'Project description', value: @workspace.description, csrfToken: form_authenticity_token }) %>
  </div>

  <%= form_with(model: @workspace) do |form| %>
    <div class="form-check">
      <label class="form-check-label">
        <%= form.check_box :published, class: 'form-check-input', onChange: 'this.form.submit()' %>
        Visible to public
      </label>
    </div>
  <% end %>
<% else %>
  <h1><%= @workspace.title %></h1>
  <%= @workspace.description %>
<% end %>
<%= link_to 'Open', edit_workspace_path(@workspace) %>

<%= link_to 'Embed', embed_workspace_path(@workspace) %>
